{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "A basic pie chart example.",
  "width": 200,
  "height": 300,
  "autosize": "pad",
  "data": [
    {
      "name": "table",
      "values": [
        {"id": "1", "field": "4", "group": "a"},
        {"id": "2", "field": "6", "group": "a"},
        {"id": "3", "field": "10", "group": "a"},
        {"id": "4", "field": "3", "group": "2"},
        {"id": "5", "field": "7", "group": "2"},
        {"id": "6", "field": "8", "group": "2"}
      ]
    }
  ],
  "scales": [
    {
      "name": "color",
      "type": "ordinal",
      "domain": {"data": "table", "field": "id"},
      "range": {"scheme": "category20"}
    },
    {
      "name": "yscale",
      "type": "band",
      "domain": {"data": "table", "field": "group"},
      "range": "height",
      "padding": 0
    }
  ],
  "marks": [
    {
      "type": "group",
      "name": "f",
      "from": {"facet": {"data": "table", "name": "facet", "groupby": "group"}},
      "encode": {"update": {"y": {"scale": "yscale", "field": "group"}}},
      "marks": [
        {
          "type": "arc",
          "from": {"data": "facet"},
          "transform": [{"type": "pie", "field": "datum.field"}],
          "encode": {
            "enter": {
              "startAngle": {"field": "startAngle"},
              "endAngle": {"field": "endAngle"},
              "fill": {"scale": "color", "field": "id"},
              "outerRadius": {"value": 50},
              "x": {"signal": "width / 2"},
              "y": {"signal": "height / 2"},
              "opacity": {"value": 0.8}
            }
          }
        }
      ]
    }
  ]
}